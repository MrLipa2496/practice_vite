import{_ as p,c as r,a as f,d as h,b as a,r as m,k as _,F as v,i as g,f as y,o,t as l}from"./index-Bwrb5_4_.js";import{H as $,l as b}from"./loader-D2qkesDV.js";import"./Msg-DfQ1Tyd-.js";const D={name:"Payments",components:{Header:$},data:function(){return{parent:{formData:{},user:{id:"",auth:""},url:""},loaderImg:b,data:{items:[]},loader:1}},mounted:function(){const t=this.findParent();t&&(this.parent=t),this.parent.user&&!this.parent.user.auth?typeof this.parent.logout=="function"&&this.parent.logout():this.get()},methods:{findParent(){let t=this.$parent;for(;t;){if(t.url||t.user&&t.user.auth)return t;t=t.$parent}return this.$root&&(this.$root.url||this.$root.user)?this.$root:null},toFormData(t){const e=new FormData;if(!t)return e;for(let n in t)e.append(n,t[n]);return e},get:function(){var t=this,e=this.toFormData(t.parent.formData);const n=this.parent.user?this.parent.user.id:"";e.append("id",n),t.loader=1;const c=this.parent.url||"",u=this.parent.user?this.parent.user.auth:"";if(!c){t.loader=0;return}y.post(c+"/site/getPayments?auth="+u,e).then(function(s){if(t.loader=0,s.data.error){const d=t.$refs.header?.$refs?.msg;return d&&d.alertFun(s.data.error),!1}t.data=s.data}).catch(function(s){console.error(s),t.parent.logout&&t.parent.logout(),t.loader=0})}}},k={class:"page-container"},P={key:0,id:"spinner"},F=["src"],I={class:"content-wrapper"},N={key:0,class:"table-container"},V={class:"data-table"},w={class:"col-id","data-label":"ID"},H={class:"col-stat","data-label":"Amount"},B={class:"link-primary",style:{"font-weight":"700"}},C={class:"col-title","data-label":"Date"},L={class:"col-desc","data-label":"Description"},S={key:1,class:"empty-state"};function A(t,e,n,c,u,s){const d=m("Header");return o(),r("div",k,[f(d,{ref:"header"},null,512),t.loader?(o(),r("div",P,[a("img",{src:t.loaderImg,alt:"Loading..."},null,8,F)])):h("",!0),a("div",I,[e[1]||(e[1]=_('<div class="toolbar" data-v-475f093a><div class="toolbar-left" data-v-475f093a><h1 class="page-title" data-v-475f093a>Payments</h1></div><div class="toolbar-center" data-v-475f093a></div><div class="toolbar-right" data-v-475f093a></div></div>',1)),t.data.items&&t.data.items.length>0?(o(),r("div",N,[a("table",V,[e[0]||(e[0]=a("thead",null,[a("tr",null,[a("th",{class:"col-id"},"#"),a("th",{class:"col-stat"},"Value"),a("th",null,"Date"),a("th",null,"Description")])],-1)),a("tbody",null,[(o(!0),r(v,null,g(t.data.items,i=>(o(),r("tr",{key:i.id},[a("td",w,l(i.id),1),a("td",H,[a("span",B,l(i.value),1)]),a("td",C,l(i.date_title),1),a("td",L,l(i.description),1)]))),128))])])])):t.loader?h("",!0):(o(),r("div",S,"No payments found"))])])}const G=p(D,[["render",A],["__scopeId","data-v-475f093a"]]);export{G as default};
