import{_ as u,c as l,a as g,b as s,r as c,d,w as v,e as m,v as p,f as h,o as a}from"./index-BgEqfRQl.js";import{M as _}from"./Msg-ClLLyrs6.js";const w={name:"Login",components:{Msg:_},data(){return{img:1,parent:null,form:{email:"",password:""}}},mounted(){this.img=this.randomIntFromInterval(1,7),this.parent=this.$root},methods:{randomIntFromInterval(r,e){return Math.floor(Math.random()*(e-r+1)+r)},toFormData(r){const e=new FormData;for(let o in r)e.append(o,r[o]);return e},doLogin(){const r=this;if(!this.form.email||!this.form.password){this.$refs.msg?this.$refs.msg.alertFun("Please fill all fields"):alert("Please fill all fields");return}const e=this.toFormData(this.form);h.post(this.parent.url+"/site/login",e).then(o=>{o.data.error?r.$refs.msg?r.$refs.msg.alertFun(o.data.error):alert(o.data.error):o.data.user&&(r.parent.user=o.data.user,localStorage.setItem("user",JSON.stringify(r.parent.user)),r.$router.push("/campaigns"))}).catch(o=>{console.error("Login error:",o),r.$refs.msg&&r.$refs.msg.alertFun("Network Error")})}}},b={class:"login-container"},F={id:"left-area",class:"image-side"},I=["src"],M={id:"right-area",class:"form-side"},L={class:"login-header"},N={class:"title-logo-wrapper"},k={class:"logo"},x=["src"],y={class:"form-wrapper"},S={class:"row"},V={class:"row"};function C(r,e,o,D,t,n){const f=c("Msg");return a(),l("div",b,[g(f,{ref:"msg"},null,512),s("div",F,[t.parent?(a(),l("img",{key:0,src:`${t.parent.url}/app/views/images/Cover_${t.img}.jpg`,class:"bg-cover",alt:"Cover"},null,8,I)):d("",!0)]),s("div",M,[s("div",L,[s("div",N,[e[3]||(e[3]=s("div",{class:"title"},[s("h1",null,"Affiliate Sign in")],-1)),s("div",k,[t.parent?(a(),l("img",{key:0,src:`${t.parent.url}/app/views/images/logo.svg`,alt:"Logo"},null,8,x)):d("",!0)])])]),s("div",y,[s("form",{onSubmit:e[2]||(e[2]=v((...i)=>n.doLogin&&n.doLogin(...i),["prevent"]))},[s("div",S,[e[4]||(e[4]=s("label",null,"Email",-1)),m(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=i=>t.form.email=i),required:"",placeholder:"email@example.com"},null,512),[[p,t.form.email]])]),s("div",V,[e[5]||(e[5]=s("label",null,"Password",-1)),m(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>t.form.password=i),required:"",autocomplete:"on",placeholder:"********"},null,512),[[p,t.form.password]])]),e[6]||(e[6]=s("div",{class:"row btn-row"},[s("button",{class:"btn-success"},"SIGN IN")],-1))],32)])])])}const E=u(w,[["render",C],["__scopeId","data-v-91db1b26"]]);export{E as default};
