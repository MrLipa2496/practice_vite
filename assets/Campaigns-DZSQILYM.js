import{_ as w,c as n,a as f,r as m,o,d as D,b as e,e as k,v as y,F as d,g as M,h as C,f as v,t as c,i as p,w as h}from"./index-CKV6JbqG.js";import{M as b,P as S}from"./Msg-zgRdGUBY.js";const V={name:"Header",components:{Msg:b},data(){return{user:{},parent:"",active:0,menu:0}},mounted(){this.parent=this.$root}},L={class:"header"};function N(a,t,i,g,r,l){const _=m("Msg");return o(),n("header",L,[f(_,{ref:"msg"},null,512)])}const P=w(V,[["render",N]]),A="/practice_vite/assets/loader-D7-KAJ6r.gif",H={name:"Campaigns",components:{Header:P,Popup:S},data(){return{parent:"",data:{},details:{},date:"",date2:"",q:"",sort:"",loader:1,id:0,type:0,all:!0}},mounted(){this.parent=this.$root,this.parent.user||this.parent.logout(),this.get(),this.GetFirstAndLastDate()},methods:{toFormData(a){const t=new FormData;for(let i in a)t.append(i,a[i]);return t},GetFirstAndLastDate(){const a=new Date().getFullYear(),t=new Date().getMonth(),i=new Date(a,t,2),g=new Date(a,t+1,1);this.date=i.toISOString().substring(0,10),this.date2=g.toISOString().substring(0,10)},get(){this.parent.formData||(this.parent.formData={});const a=this.toFormData(this.parent.formData);this.date!==""&&a.append("date",this.date),this.date2!==""&&a.append("date2",this.date2),this.loader=1,v.post(this.parent.url+"/site/getCampaigns?auth="+this.parent.user.auth,a).then(t=>{this.data=t.data,this.loader=0}).catch(t=>{this.parent.logout()})},action(){this.parent.formData.copy="";const a=this.toFormData(this.parent.formData);v.post(this.parent.url+"/site/actionCampaign?auth="+this.parent.user.auth,a).then(t=>{this.$refs.new&&(this.$refs.new.active=0),this.parent.formData.id?this.$refs.header.$refs.msg.successFun("Successfully updated campaign!"):this.$refs.header.$refs.msg.successFun("Successfully added new campaign!"),this.get()}).catch(t=>{console.log("errors",t)})},async del(a){if(this.parent.formData=a,await this.$refs.header.$refs.msg.confirmFun("Please confirm next action","Do you want to delete this campaign?")){const t=this.toFormData(this.parent.formData);v.post(this.parent.url+"/site/deleteCampaign?auth="+this.parent.user.auth,t).then(i=>{i.data.error?this.$refs.header.$refs.msg.alertFun(i.data.error):(this.$refs.header.$refs.msg.successFun("Successfully deleted campaign!"),this.get())}).catch(i=>{console.log("errors",i)})}},getDetails(a,t){console.log("Get details for:",a,"Type:",t)},openDetails(a,t){this.$refs.details.active=1,this.getDetails(a,t)}}},O={class:"inside-content"},T={key:0,id:"spinner"},B={class:"wrapper"},G={class:"flex panel"},I={class:"w60 ptb20 ac"},U={key:0,class:"table"},q={class:"id"},E={class:"id"},J=["onClick"],K={class:"id"},Y=["onClick"],z={class:"id"},Q=["onClick"],R={class:"id"},W=["onClick"],X={class:"actions"},Z=["onClick"],j={key:1,class:"empty"},tt={class:"popup-content"};function et(a,t,i,g,r,l){const _=m("Header"),$=m("router-link"),F=m("Popup");return o(),n("div",O,[f(_,{ref:"header"},null,512),r.loader?(o(),n("div",T,[...t[4]||(t[4]=[e("img",{src:A,alt:"Loading..."},null,-1)])])):D("",!0),e("div",B,[e("div",G,[t[6]||(t[6]=e("div",{class:"w20"},null,-1)),e("div",I,[k(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>r.date=s),onChange:t[1]||(t[1]=s=>l.get())},null,544),[[y,r.date]]),t[5]||(t[5]=e("span",{style:{margin:"0 5px",color:"#888"}},"-",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>r.date2=s),onChange:t[3]||(t[3]=s=>l.get())},null,544),[[y,r.date2]])]),t[7]||(t[7]=e("div",{class:"w20 ptb30 ar"},[e("h1",null,"Campaigns")],-1))]),r.data.items!=""?(o(),n("div",U,[e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",{class:"id"},"#"),e("th",{class:"id"}),e("th",null,"Title"),e("th",{class:"id"},"Views"),e("th",{class:"id"},"Clicks"),e("th",{class:"id"},"Leads"),e("th",{class:"id"},"Fraud clicks"),e("th",{class:"actions"},"Actions")])],-1)),e("tbody",null,[(o(!0),n(d,null,M(r.data.items,(s,x)=>(o(),n("tr",{key:s.id||x},[e("td",q,c(s.id),1),t[9]||(t[9]=e("td",{class:"id"},null,-1)),e("td",null,[f($,{to:"/campaign/"+s.id},{default:C(()=>[p(c(s.title),1)]),_:2},1032,["to"])]),e("td",E,[e("a",{href:"#",onClick:h(u=>l.openDetails(s.id,1),["prevent"])},c(s.views),9,J)]),e("td",K,[e("a",{href:"#",onClick:h(u=>l.openDetails(s.id,2),["prevent"])},[s.clicks?(o(),n(d,{key:0},[p(c(s.clicks),1)],64)):(o(),n(d,{key:1},[p("0")],64))],8,Y)]),e("td",z,[e("a",{href:"#",onClick:h(u=>l.openDetails(s.id,3),["prevent"])},[s.leads?(o(),n(d,{key:0},[p(c(s.leads),1)],64)):(o(),n(d,{key:1},[p("0")],64))],8,Q)]),e("td",R,[e("a",{href:"#",onClick:h(u=>l.openDetails(s.id,4),["prevent"])},[s.fclicks?(o(),n(d,{key:0},[p(c(s.fclicks),1)],64)):(o(),n(d,{key:1},[p("0")],64))],8,W)]),e("td",X,[e("a",{href:"#",onClick:h(u=>l.del(s),["prevent"])},[...t[8]||(t[8]=[e("i",{class:"fas fa-trash-alt"},null,-1)])],8,Z)])]))),128))])])])):D("",!0),r.data.items==""?(o(),n("div",j,"No items")):D("",!0)]),f(F,{ref:"details",title:"Campaign Details"},{default:C(()=>[e("div",tt,[t[11]||(t[11]=e("p",null,"Details for campaign loaded in console.",-1)),e("pre",null,c(r.details),1)])]),_:1},512)])}const nt=w(H,[["render",et],["__scopeId","data-v-0bc2c296"]]);export{nt as default};
