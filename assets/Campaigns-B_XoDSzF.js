import{_ as M,c as l,a as r,b as e,r as k,d as u,t as f,n as F,g as c,T as x,F as V,h as N,o as i,e as D,w as m,i as h,j as T,k as A,v as b,l as U,f as w}from"./index-CIfh66ns.js";import{M as L,P}from"./Msg-CEk0MJzD.js";const q={name:"Header",components:{Msg:L},data(){return{active:!1,menu:!1,parent:null}},mounted(){this.parent=this.$parent.$parent.$parent||this.$parent||this.$root},methods:{toggleActive(){this.active=!this.active},toggleMenu(){this.menu=!this.menu},closeMenu(){this.menu=!1,this.active=!1}}},I={class:"header"},B={class:"header-content"},H={key:0,class:"user-section"},O={class:"user-avatar"},$={key:0,class:"user-dropdown"},E={class:"nav-section"},G={class:"logo-section"},z=["src"];function J(a,t,d,y,s,o){const g=k("Msg"),p=k("router-link"),C=N("click-outside");return i(),l("header",I,[r(g,{ref:"msg"},null,512),e("div",B,[s.parent&&s.parent.user&&s.parent.user.user?(i(),l("div",H,[e("div",{class:"user-trigger",onClick:t[0]||(t[0]=_=>o.toggleActive())},[e("div",O,f(s.parent.user.user[0]),1),e("i",{class:F(["fas fa-caret-down arrow-icon",{rotated:s.active}])},null,2)]),r(x,{name:"dropdown"},{default:c(()=>[s.active?D((i(),l("div",$,[e("a",{href:"#",onClick:t[1]||(t[1]=m(_=>s.parent.logout(),["prevent"])),class:"dropdown-item"},[t[5]||(t[5]=e("i",{class:"fas fa-sign-out-alt"},null,-1)),e("span",null,"Log out ("+f(s.parent.user.user)+")",1)])])),[[C,o.closeMenu]]):u("",!0)]),_:1})])):u("",!0),e("nav",E,[e("div",{class:"mobile-burger",onClick:t[2]||(t[2]=_=>o.toggleMenu())},[...t[6]||(t[6]=[e("i",{class:"fas fa-bars"},null,-1)])]),s.menu?(i(),l("div",{key:0,class:"nav-overlay",onClick:t[3]||(t[3]=_=>o.closeMenu())})):u("",!0),e("ul",{class:F(["nav-list",{"mobile-active":s.menu}])},[e("li",{class:"mobile-close",onClick:t[4]||(t[4]=_=>o.closeMenu())},[...t[7]||(t[7]=[e("i",{class:"fas fa-times"},null,-1)])]),s.parent&&s.parent.user&&s.parent.user.type=="admin"?(i(),l(V,{key:0},[e("li",null,[r(p,{to:"/users","active-class":"active-link"},{default:c(()=>[...t[8]||(t[8]=[e("i",{class:"fas fa-users"},null,-1),h(" Users ",-1)])]),_:1})]),e("li",null,[r(p,{to:"/campaigns","active-class":"active-link"},{default:c(()=>[...t[9]||(t[9]=[e("i",{class:"fas fa-bullhorn"},null,-1),h(" Campaigns ",-1)])]),_:1})])],64)):u("",!0),s.parent&&s.parent.user&&s.parent.user.type!="admin"?(i(),l(V,{key:1},[e("li",null,[r(p,{to:"/statistics","active-class":"active-link"},{default:c(()=>[...t[10]||(t[10]=[e("i",{class:"fas fa-chart-area"},null,-1),h(" Statistics ",-1)])]),_:1})]),e("li",null,[r(p,{to:"/ads","active-class":"active-link"},{default:c(()=>[...t[11]||(t[11]=[e("i",{class:"fas fa-image"},null,-1),h(" Ads ",-1)])]),_:1})]),e("li",null,[r(p,{to:"/sites","active-class":"active-link"},{default:c(()=>[...t[12]||(t[12]=[e("i",{class:"fab fa-chrome"},null,-1),h(" Sites ",-1)])]),_:1})]),e("li",null,[r(p,{to:"/payments","active-class":"active-link"},{default:c(()=>[...t[13]||(t[13]=[e("i",{class:"fas fa-credit-card"},null,-1),h(" Payments ",-1)])]),_:1})])],64)):u("",!0)],2)]),e("div",G,[s.parent&&s.parent.url?(i(),l("img",{key:0,src:s.parent.url+"/app/views/images/logo.svg",alt:"Logo"},null,8,z)):u("",!0)])])])}const K=M(q,[["render",J],["__scopeId","data-v-77ed2c6f"]]),Y={name:"Toogle",props:{modelValue:[String,Number,Boolean]},data(){return{value:!1}},watch:{modelValue(a){this.value=a==="1"||a===1||a==="true"||a===!0}},mounted(){this.value=this.modelValue==="1"||this.modelValue===1||this.modelValue==="true"||this.modelValue===!0},methods:{change(){const a=this.value?"1":"0";this.$emit("update:modelValue",a)}}},j={class:"switch-creative"};function Q(a,t,d,y,s,o){return i(),l("label",j,[D(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=g=>s.value=g),onChange:t[1]||(t[1]=g=>o.change())},null,544),[[A,s.value]]),t[2]||(t[2]=T('<div class="switch-bg" data-v-8ad3f3a6><div class="icons-track" data-v-8ad3f3a6><i class="fas fa-check icon-check" data-v-8ad3f3a6></i><i class="fas fa-times icon-cross" data-v-8ad3f3a6></i></div><div class="switch-handle" data-v-8ad3f3a6></div></div>',1))])}const R=M(Y,[["render",Q],["__scopeId","data-v-8ad3f3a6"]]),W="/practice_vite/assets/loader-D7-KAJ6r.gif",X={name:"Campaigns",components:{Header:K,Popup:P,Toogle:R},data(){return{parent:"",data:{},details:{},date:"",date2:"",q:"",sort:"",loader:1,id:0,type:0,all:!0}},mounted(){this.parent=this.$root||this.$parent,this.parent&&!this.parent.user&&this.parent.logout&&this.parent.logout(),this.get()},methods:{toFormData(a){const t=new FormData;for(let d in a)t.append(d,a[d]);return t},GetFirstAndLastDate(){const a=new Date().getFullYear(),t=new Date().getMonth(),d=new Date(a,t,2),y=new Date(a,t+1,1);this.date=d.toISOString().substring(0,10),this.date2=y.toISOString().substring(0,10)},get(){this.parent.formData||(this.parent.formData={});const a=this.toFormData(this.parent.formData);this.date!==""&&a.append("date",this.date),this.date2!==""&&a.append("date2",this.date2),this.q&&a.append("q",this.q),this.sort&&a.append("sort",this.sort),this.loader=1,this.parent.user&&w.post(this.parent.url+"/site/getCampaigns?auth="+this.parent.user.auth,a).then(t=>{this.data=t.data,this.loader=0}).catch(t=>{this.parent.logout&&this.parent.logout(),console.error(t)})},action(){if(!this.parent.formData)return;this.parent.formData.copy="";const a=this.toFormData(this.parent.formData);w.post(this.parent.url+"/site/actionCampaign?auth="+this.parent.user.auth,a).then(t=>{this.$refs.new&&(this.$refs.new.active=0),this.parent.formData.id?this.$refs.header.$refs.msg.successFun("Successfully updated campaign!"):this.$refs.header.$refs.msg.successFun("Successfully added new campaign!"),this.get()}).catch(t=>{console.log("errors",t)})},async del(a){if(this.parent.formData=a,await this.$refs.header.$refs.msg.confirmFun("Please confirm next action","Do you want to delete this campaign?")){const t=this.toFormData(this.parent.formData);w.post(this.parent.url+"/site/deleteCampaign?auth="+this.parent.user.auth,t).then(d=>{d.data.error?this.$refs.header.$refs.msg.alertFun(d.data.error):(this.$refs.header.$refs.msg.successFun("Successfully deleted campaign!"),this.get())}).catch(d=>{console.log("errors",d)})}},getDetails(a,t){console.log("Get details for:",a,"Type:",t)},openDetails(a,t){this.$refs.details.active=1,this.getDetails(a,t)}}},Z={class:"page-container"},tt={key:0,id:"spinner"},et={class:"content-wrapper"},st={class:"toolbar"},at={class:"toolbar-left"},nt={class:"toolbar-center"},ot={class:"form-container"},lt={class:"form-group"},it={class:"form-actions"},rt={key:0,class:"btn-primary"},dt={key:1,class:"btn-primary"},ut={key:0,class:"table-container"},ct={class:"data-table"},pt={class:"col-id"},ft={class:"col-toggle"},mt={class:"col-title"},ht={class:"col-stat"},vt=["onClick"],gt={class:"col-stat"},_t=["onClick"],kt={class:"col-stat"},Dt=["onClick"],yt={class:"col-stat"},Ct=["onClick"],bt={class:"col-actions"},wt=["onClick"],Vt={key:1,class:"empty-state"},Mt={class:"popup-content"};function Ft(a,t,d,y,s,o){const g=k("Header"),p=k("Popup"),C=k("Toogle"),_=k("router-link");return i(),l("div",Z,[r(g,{ref:"header"},null,512),s.loader?(i(),l("div",tt,[...t[7]||(t[7]=[e("img",{src:W,alt:"Loading..."},null,-1)])])):u("",!0),e("div",et,[e("div",st,[e("div",at,[e("a",{class:"btn-primary",href:"#",onClick:t[0]||(t[0]=m(n=>{s.parent.formData={},a.$refs.new.active=1},["prevent"]))},[...t[8]||(t[8]=[e("i",{class:"fas fa-plus"},null,-1),h(" New ",-1)])])]),e("div",nt,[D(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=n=>s.date=n),onChange:t[2]||(t[2]=n=>o.get()),class:"date-input"},null,544),[[b,s.date]]),t[9]||(t[9]=e("span",{class:"date-separator"},"â€”",-1)),D(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=n=>s.date2=n),onChange:t[4]||(t[4]=n=>o.get()),class:"date-input"},null,544),[[b,s.date2]])]),t[10]||(t[10]=e("div",{class:"toolbar-right"},[e("h1",{class:"page-title"},"Campaigns")],-1))]),r(p,{ref:"new",title:s.parent.formData&&s.parent.formData.id?"Edit campaign":"New campaign"},{default:c(()=>[e("div",ot,[s.parent.formData?(i(),l("form",{key:0,onSubmit:t[6]||(t[6]=m(n=>o.action(),["prevent"]))},[e("div",lt,[t[11]||(t[11]=e("label",null,"Name",-1)),D(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>s.parent.formData.title=n),required:"",placeholder:"Enter campaign name...",class:"text-input"},null,512),[[b,s.parent.formData.title]])]),e("div",it,[s.parent.formData&&s.parent.formData.id?(i(),l("button",rt," Save Changes ")):u("",!0),s.parent.formData&&!s.parent.formData.id?(i(),l("button",dt," Add Campaign ")):u("",!0)])],32)):u("",!0)])]),_:1},8,["title"]),s.data.items&&s.data.items.length>0?(i(),l("div",ut,[e("table",ct,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{class:"col-id"},"#"),e("th",{class:"col-toggle"},"Status"),e("th",null,"Title"),e("th",{class:"col-stat"},"Views"),e("th",{class:"col-stat"},"Clicks"),e("th",{class:"col-stat"},"Leads"),e("th",{class:"col-stat"},"Fraud"),e("th",{class:"col-actions"},"Actions")])],-1)),e("tbody",null,[(i(!0),l(V,null,U(s.data.items,(n,S)=>(i(),l("tr",{key:n.id||S},[e("td",pt,f(n.id),1),e("td",ft,[r(C,{modelValue:n.published,"onUpdate:modelValue":[v=>n.published=v,v=>{s.parent.formData=n,o.action()}]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",mt,[r(_,{to:"/campaign/"+n.id,class:"link-primary"},{default:c(()=>[h(f(n.title),1)]),_:2},1032,["to"])]),e("td",ht,[e("a",{href:"#",onClick:m(v=>o.openDetails(n.id,1),["prevent"])},f(n.views),9,vt)]),e("td",gt,[e("a",{href:"#",onClick:m(v=>o.openDetails(n.id,2),["prevent"])},f(n.clicks||0),9,_t)]),e("td",kt,[e("a",{href:"#",onClick:m(v=>o.openDetails(n.id,3),["prevent"])},f(n.leads||0),9,Dt)]),e("td",yt,[e("a",{href:"#",onClick:m(v=>o.openDetails(n.id,4),["prevent"])},f(n.fclicks||0),9,Ct)]),e("td",bt,[e("a",{href:"#",onClick:m(v=>{s.parent.formData=n,o.del(n)},["prevent"]),class:"icon-delete"},[...t[12]||(t[12]=[e("i",{class:"fas fa-trash-alt"},null,-1)])],8,wt)])]))),128))])])])):u("",!0),!s.data.items||s.data.items.length===0?(i(),l("div",Vt," No items found ")):u("",!0)]),r(p,{ref:"details",title:"Campaign Details"},{default:c(()=>[e("div",Mt,[t[14]||(t[14]=e("p",null,"Details for campaign loaded in console.",-1)),e("pre",null,f(s.details),1)])]),_:1},512)])}const Nt=M(X,[["render",Ft],["__scopeId","data-v-87005382"]]);export{Nt as default};
