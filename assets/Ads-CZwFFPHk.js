import{_ as g,c as o,a as u,d,b as a,r as f,k as y,h as _,F as b,i as k,f as $,o as r,e as w,v as C,w as h,g as D,t as c}from"./index-Bwrb5_4_.js";import{H as P,l as F}from"./loader-D2qkesDV.js";import{P as N}from"./Msg-DfQ1Tyd-.js";const V={name:"Ads",components:{Header:P,Popup:N},data:function(){return{parent:{formData:{},user:{id:"",auth:""},url:""},loaderImg:F,data:{items:[]},loader:1}},mounted:function(){const t=this.findParent();t&&(this.parent=t),this.parent.user&&!this.parent.user.auth?typeof this.parent.logout=="function"&&this.parent.logout():this.get()},methods:{findParent(){let t=this.$parent;for(;t;){if(t.url||t.user&&t.user.auth)return t;t=t.$parent}return this.$root&&(this.$root.url||this.$root.user)?this.$root:null},toFormData(t){const e=new FormData;if(!t)return e;for(let n in t)e.append(n,t[n]);return e},get:function(){var t=this,e=this.toFormData(t.parent.formData);const n=this.parent.user?this.parent.user.id:"";e.append("uid",n),e.append("type","user"),t.loader=1;const l=this.parent.url||"",p=this.parent.user?this.parent.user.auth:"";if(!l){t.loader=0;return}$.post(l+"/site/getBanners?auth="+p,e).then(function(i){t.loader=0,t.data=i.data}).catch(function(i){console.error(i),t.parent.logout&&t.parent.logout(),t.loader=0})},copy:async function(t){if(navigator&&navigator.clipboard){await navigator.clipboard.writeText(t);const e=this.$refs.header?.$refs?.msg;e&&e.successFun("Successfully copied!"),this.$refs.copy&&(this.$refs.copy.active=0)}else{const e=this.$refs.header?.$refs?.msg;e&&e.alertFun("Use https!")}}}},A={class:"page-container"},I={key:0,id:"spinner"},B=["src"],H={class:"content-wrapper"},L={class:"form-container"},S={key:0},T={class:"form-group"},M={class:"form-actions"},U={key:0,class:"table-container"},E={class:"data-table"},q={class:"col-id","data-label":"ID"},z={"data-label":"Preview"},G={class:"mini-preview"},J=["src"],K={class:"col-title","data-label":"Campaign"},O={class:"col-link","data-label":"Link"},Q=["href"],R={class:"col-actions","data-label":"Actions"},W=["onClick"],X={key:1,class:"empty-state"};function Y(t,e,n,l,p,i){const m=f("Header"),v=f("Popup");return r(),o("div",A,[u(m,{ref:"header"},null,512),t.loader?(r(),o("div",I,[a("img",{src:t.loaderImg,alt:"Loading..."},null,8,B)])):d("",!0),a("div",H,[e[6]||(e[6]=y('<div class="toolbar" data-v-80432f99><div class="toolbar-left" data-v-80432f99><h1 class="page-title" data-v-80432f99>Ads</h1></div><div class="toolbar-center" data-v-80432f99></div><div class="toolbar-right" data-v-80432f99></div></div>',1)),u(v,{ref:"copy",title:"Copy banner"},{default:_(()=>[a("div",L,[t.parent.formData?(r(),o("form",S,[a("div",T,[e[2]||(e[2]=a("label",null,"Code",-1)),w(a("textarea",{class:"text-input",style:{height:"120px","font-family":"monospace"},"onUpdate:modelValue":e[0]||(e[0]=s=>t.parent.formData.copy=s)},null,512),[[C,t.parent.formData.copy]])]),a("div",M,[a("button",{class:"btn-primary",onClick:e[1]||(e[1]=h(s=>i.copy(t.parent.formData.copy),["prevent"]))},[...e[3]||(e[3]=[a("i",{class:"fas fa-copy"},null,-1),D(" Copy code ",-1)])])])])):d("",!0)])]),_:1},512),t.data.items&&t.data.items.length>0?(r(),o("div",U,[a("table",E,[e[5]||(e[5]=a("thead",null,[a("tr",null,[a("th",{class:"col-id"},"#"),a("th",{style:{width:"120px"}},"Preview"),a("th",null,"Campaign"),a("th",null,"Link"),a("th",{class:"col-actions"},"Actions")])],-1)),a("tbody",null,[(r(!0),o(b,null,k(t.data.items,s=>(r(),o("tr",{key:s.id},[a("td",q,c(s.id),1),a("td",z,[a("div",G,[a("img",{src:s.img?t.parent.url+s.img:"",alt:"ad"},null,8,J)])]),a("td",K,c(s.campaign_title),1),a("td",O,[a("a",{href:s.link,target:"_blank",class:"link-primary"},c(s.link),9,Q)]),a("td",R,[a("a",{href:"#",class:"action-icon",title:"Copy Code",onClick:h(Z=>{t.parent.formData=s,t.$refs.copy.active=1},["prevent"])},[...e[4]||(e[4]=[a("i",{class:"fas fa-copy"},null,-1)])],8,W)])]))),128))])])])):t.loader?d("",!0):(r(),o("div",X,"No items found"))])])}const et=g(V,[["render",Y],["__scopeId","data-v-80432f99"]]);export{et as default};
