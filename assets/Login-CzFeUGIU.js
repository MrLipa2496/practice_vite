import{_ as p,c as i,a as n,b as t,d,t as c,F as _,o as l,e as v,r as w,w as F,f as u,v as f,g as M}from"./index-BVDSbEjf.js";const b={name:"Msg",data(){return{alert:"",success:"",timer:null}},methods:{alertFun(e){this.reset(),this.alert=e,this.startTimer(()=>{this.alert=""})},successFun(e){this.reset(),this.success=e,this.startTimer(()=>{this.success=""})},reset(){this.timer&&clearTimeout(this.timer),this.alert="",this.success=""},startTimer(e){this.timer=setTimeout(()=>{e()},3e3)}}},k={key:0,class:"alertMsg"},y={key:1,class:"successMsg"};function I(e,s,o,g,r,m){return l(),i(_,null,[r.alert?(l(),i("div",k,[s[0]||(s[0]=t("i",{class:"fas fa-times-circle"},null,-1)),d(" "+c(r.alert),1)])):n("",!0),r.success?(l(),i("div",y,[s[1]||(s[1]=t("i",{class:"fas fa-check-circle"},null,-1)),d(" "+c(r.success),1)])):n("",!0)],64)}const x=p(b,[["render",I],["__scopeId","data-v-a49053c2"]]),N={name:"Login",components:{Msg:x},data(){return{img:1,parent:null,form:{email:"",password:""}}},mounted(){this.img=this.randomIntFromInterval(1,7),this.parent=this.$root},methods:{randomIntFromInterval(e,s){return Math.floor(Math.random()*(s-e+1)+e)},toFormData(e){const s=new FormData;for(let o in e)s.append(o,e[o]);return s},doLogin(){const e=this;if(!this.form.email||!this.form.password){this.$refs.msg?this.$refs.msg.alertFun("Please fill all fields"):alert("Please fill all fields");return}const s=this.toFormData(this.form);M.post(this.parent.url+"/site/login",s).then(o=>{o.data.error?e.$refs.msg?e.$refs.msg.alertFun(o.data.error):alert(o.data.error):o.data.user&&(e.parent.user=o.data.user,localStorage.setItem("user",JSON.stringify(e.parent.user)),e.$router.push("/campaigns"))}).catch(o=>{console.error("Login error:",o),e.$refs.msg&&e.$refs.msg.alertFun("Network Error")})}}},$={class:"login-container"},L={id:"left-area",class:"image-side"},T=["src"],S={id:"right-area",class:"form-side"},V={class:"login-header"},D={class:"title-logo-wrapper"},C={class:"logo"},B=["src"],E={class:"form-wrapper"},P={class:"row"},q={class:"row"};function U(e,s,o,g,r,m){const h=w("Msg");return l(),i("div",$,[v(h,{ref:"msg"},null,512),t("div",L,[r.parent?(l(),i("img",{key:0,src:`${r.parent.url}/app/views/images/Cover_${r.img}.jpg`,class:"bg-cover",alt:"Cover"},null,8,T)):n("",!0)]),t("div",S,[t("div",V,[t("div",D,[s[3]||(s[3]=t("div",{class:"title"},[t("h1",null,"Affiliate Sign in")],-1)),t("div",C,[r.parent?(l(),i("img",{key:0,src:`${r.parent.url}/app/views/images/logo.svg`,alt:"Logo"},null,8,B)):n("",!0)])])]),t("div",E,[t("form",{onSubmit:s[2]||(s[2]=F((...a)=>m.doLogin&&m.doLogin(...a),["prevent"]))},[t("div",P,[s[4]||(s[4]=t("label",null,"Email",-1)),u(t("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=a=>r.form.email=a),required:"",placeholder:"email@example.com"},null,512),[[f,r.form.email]])]),t("div",q,[s[5]||(s[5]=t("label",null,"Password",-1)),u(t("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=a=>r.form.password=a),required:"",autocomplete:"on",placeholder:"********"},null,512),[[f,r.form.password]])]),s[6]||(s[6]=t("div",{class:"row btn-row"},[t("button",{class:"btn-success"},"SIGN IN")],-1))],32)])])])}const G=p(N,[["render",U],["__scopeId","data-v-91db1b26"]]);export{G as default};
